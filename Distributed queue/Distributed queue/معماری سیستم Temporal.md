
### ۱. سرور تمپورال (Temporal Server)

سرور تمپورال از یک **سرویس فرانت‌اند (Frontend Service)** و چندین سرویس بک‌اند تشکیل شده است.

- **مقیاس‌پذیری:** تمام این سرویس‌ها به‌صورت افقی (Horizontal) مقیاس‌پذیر هستند؛ یعنی می‌توانید برای عملکرد بهتر، چندین نسخه از آن‌ها را روی ماشین‌های مختلف اجرا کنید.
    
- **ارتباطات:** کلاینت‌ها (CLI، وب‌سایت یا کد شما) فقط با «سرویس فرانت‌اند» صحبت می‌کنند. این ارتباط از طریق پروتکل **[[gRPC]]** و قالب **Protocol Buffers** انجام می‌شود که بسیار پرسرعت است.
    
- **امنیت:** کل ارتباطات را می‌توان با **[[TLS]]** رمزنگاری و ایمن کرد.
    

### ۲. کلاستر تمپورال (Temporal Cluster)

کلاستر یعنی کلِ اکوسیستمی که برای کارکرد سرور نیاز است. اجزای آن عبارتند از:

- **دیتابیس (حیاتی):** تمپورال برای ذخیره «وضعیت فعلی» و «تاریخچه رویدادها (History)» به یک دیتابیس (مثل PostgreSQL، MySQL یا Cassandra) نیاز دارد. اگر سیستم کرش کند، تمپورال با استفاده از این تاریخچه، همه چیز را بازسازی می‌کند.
    
- **Elasticsearch (اختیاری):** برای جست‌وجوی پیشرفته و فیلتر کردن بین میلیون‌ها Workflow (مثلاً پیدا کردن موارد ناموفق در یک بازه زمانی خاص).
    
- **[[Prometheus]] و [[Grafana]]:** ابزارهایی که معمولاً برای مانیتورینگ و مشاهده سلامت سیستم در کنار کلاستر نصب می‌شوند.
    

### ۳. ورکرها ([[Workers]]) - نکته بسیار مهم

بزرگترین سوءتفاهم برای تازه‌کارها اینجاست: **کلاستر تمپورال کد شما را اجرا نمی‌کند!**

- **نقش کلاستر:** فقط نقش «ارکستر» یا «ناظم» را دارد؛ دستور می‌دهد که چه کاری انجام شود و وضعیت را ثبت می‌کند.
    
- **نقش ورکر:** کد برنامه‌نویسی شما (بیزنس لاجیک) روی سرورهای خودتان و در قالب **Worker** اجرا می‌شود. ورکرها از کلاستر می‌پرسند: «کاری برای من هست؟» و سپس کد را اجرا کرده و نتیجه را به کلاستر برمی‌گردانند.
    
- **استقلال:** ورکرها می‌توانند در یک دیتاسنتر کاملاً متفاوت از کلاستر قرار داشته باشند.
    

### ۴. اتصال و شبکه (Connectivity)

- **پورت پیش‌فرض:** ورکرها باید بتوانند به سرویس فرانت‌اند کلاستر روی پورت **7233** (پروتکل [[TCP]]) متصل شوند.
    
- **نیازمندی‌ها:** هر ماشینی که ورکر روی آن اجرا می‌شود، باید تمام کتابخانه‌ها و پیش‌نیازهای کد شما را داشته باشد.